{
  "dashboard": {
    "title": "Unilever Data Quality Monitoring",
    "tags": ["etl", "data-quality"],
    "timezone": "browser",
    "panels": [
      {
        "title": "Total Quality Issues (Last 30 Days)",
        "type": "stat",
        "targets": [
          {
            "rawSql": "SELECT SUM(issue_count) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '30 days'",
            "format": "table"
          }
        ]
      },
      {
        "title": "Issues by Type",
        "type": "stat",
        "targets": [
          {
            "rawSql": "SELECT COUNT(DISTINCT check_type) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '30 days'",
            "format": "table"
          }
        ]
      },
      {
        "title": "Latest Run Quality Score",
        "type": "stat",
        "targets": [
          {
            "rawSql": "SELECT COUNT(*) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '1 day'",
            "format": "table"
          }
        ]
      },
      {
        "title": "Active Data Issues",
        "type": "stat",
        "targets": [
          {
            "rawSql": "SELECT COUNT(DISTINCT table_name) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '30 days'",
            "format": "table"
          }
        ]
      },
      {
        "title": "Quality Issues Over Time",
        "type": "timeseries",
        "targets": [
          {
            "rawSql": "SELECT timestamp as time, check_type, SUM(issue_count) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '30 days' GROUP BY timestamp, check_type ORDER BY timestamp DESC",
            "format": "table"
          }
        ]
      },
      {
        "title": "Issue Distribution by Type",
        "type": "piechart",
        "targets": [
          {
            "rawSql": "SELECT check_type, SUM(issue_count) as value FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '30 days' GROUP BY check_type ORDER BY value DESC",
            "format": "table"
          }
        ]
      },
      {
        "title": "Recent Quality Issues",
        "type": "table",
        "targets": [
          {
            "rawSql": "SELECT run_id, table_name, check_type, issue_count, timestamp FROM data_quality_log WHERE timestamp > NOW() - INTERVAL '7 days' ORDER BY timestamp DESC LIMIT 20",
            "format": "table"
          }
        ]
      }
    ],
    "refresh": "30s",
    "schemaVersion": 36,
    "version": 1,
    "uid": "data-quality",
    "links": []
  },
  "overwrite": true
}
